*tasks / 야물========================================
---
# tasks file for test-role

- name: install service {{ service_title }}
  ansible.builtin.dnf:
    name: "{{ item }}"
    state: latest
  loop: "{{ httpd_packages }}"
  when: ansible_facts.distribution in supported_distros

- name: copy conf file
  ansible.builtin.copy:
    src: "{{ src_file_path }}"
    dest: "{{ dest_file_path }}"
  notify: 
    - restart service

*handlers  / 야물========================================
---
# handlers file for my-role

- name: restart service
  ansible.builtin.service:
    name: "{{ service_name }}"
    state: restarted

*defaults / 야물 =========================================
---
# defaults file for my-role
service_title: "Apache Web Server"


*vars 야물 ===========================================
---
# vars file for my-role
service_name: httpd
src_file_path: ../files/index.html
dest_file_path: /var/www/html
httpd_packages:
  - httpd-tools
  - httpd-filesystem
  - httpd

supported_distros:
  - CentOS
  - Rocky

*role 야물 ==========================================
---

- hosts: node1-test.com

  tasks:
    - name: Print start play
      ansible.builtin.debug:
        msg: "Let's start role play"

    - name: Install Service by role
      ansible.builtin.import_role:
        name: test-role



